{"ast":null,"code":"var _jsxFileName = \"E:\\\\Inspection System\\\\Inspection (Web) - React\\\\src\\\\components\\\\UserPermission.js\",\n  _s = $RefreshSig$();\nimport { Button, Checkbox, FormControlLabel, FormGroup, TextField } from '@mui/material';\nimport LogoutTwoToneIcon from '@mui/icons-material/LogoutTwoTone';\nimport SaveTwoToneIcon from '@mui/icons-material/SaveTwoTone';\nimport React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport SearchableDropdown from \"./SearchableDropdown\";\nimport '../Css/UserPermission.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserPermission = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [eId, setEId] = useState(\"Select User Id...\");\n  const [permissions, setPermissions] = useState([]);\n  const [selectedPermissions, setSelectedPermissions] = useState([]);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (localStorage.getItem('token') == null) navigate('/');\n    getUsers();\n    getPermissions();\n  }, []);\n  const getUsers = async () => {\n    try {\n      const response = await fetch('http://10.12.3.182:3000/inspaction/get_users', {\n        method: 'GET'\n      });\n      const json = await response.json();\n      const arr = [];\n      json.forEach(element => {\n        arr.push(element);\n      });\n      setUsers(arr);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const getPermissions = async () => {\n    try {\n      const response = await fetch('http://10.12.3.182:3000/inspaction/get_all_permissions', {\n        method: 'GET'\n      });\n      const json = await response.json();\n      const arr = [];\n      json.forEach(element => {\n        arr.push(element);\n      });\n      setPermissions(arr);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const getSelectedPermissions = async id => {\n    const response = await fetch('http://10.12.3.182:3000/inspaction/get_selected_permissions', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        Id: id\n      })\n    });\n    const json = await response.json();\n    setSelectedPermissions(json);\n  };\n  const handleEId = val => {\n    setEId(val);\n    getSelectedPermissions(val);\n  };\n  const savePermissions = async () => {\n    const response = await fetch('http://10.12.3.182:3000/inspaction/save_permissions', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        eId,\n        selectedPermissions\n      })\n    });\n    const json = await response.json();\n  };\n  const handleChange = id => {\n    if (selectedPermissions.includes(id)) {\n      setSelectedPermissions(selectedPermissions.filter(x => x !== id));\n    } else {\n      setSelectedPermissions([...selectedPermissions, id]);\n    }\n    console.log(selectedPermissions);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"head-title\",\n        children: \"User Permission\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logout\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          startIcon: /*#__PURE__*/_jsxDEV(LogoutTwoToneIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 51\n          }, this),\n          onClick: () => {\n            localStorage.removeItem(\"token\");\n            navigate('/');\n          },\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(SearchableDropdown, {\n          options: users,\n          label: \"eId\",\n          id: \"eId\",\n          selectedVal: eId,\n          handleChange: val => {\n            handleEId(val);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n          children: permissions.map(element => /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              value: element.permission_name,\n              checked: selectedPermissions.includes(element.id),\n              onChange: () => handleChange(element.id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 33\n            }, this),\n            label: element.permission_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(SaveTwoToneIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 56\n          }, this),\n          onClick: () => {\n            savePermissions();\n          },\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 9\n  }, this);\n};\n_s(UserPermission, \"j7YPKP28XWKMfiCF0WzW9tpqa00=\", false, function () {\n  return [useNavigate];\n});\n_c = UserPermission;\nexport default UserPermission;\nvar _c;\n$RefreshReg$(_c, \"UserPermission\");","map":{"version":3,"names":["Button","Checkbox","FormControlLabel","FormGroup","TextField","LogoutTwoToneIcon","SaveTwoToneIcon","React","useEffect","useState","Link","useNavigate","SearchableDropdown","UserPermission","users","setUsers","eId","setEId","permissions","setPermissions","selectedPermissions","setSelectedPermissions","navigate","localStorage","getItem","getUsers","getPermissions","response","fetch","method","json","arr","forEach","element","push","error","console","getSelectedPermissions","id","headers","Accept","body","JSON","stringify","Id","handleEId","val","savePermissions","handleChange","includes","filter","x","log","removeItem","map","permission_name"],"sources":["E:/Inspection System/Inspection (Web) - React/src/components/UserPermission.js"],"sourcesContent":["import { Button, Checkbox, FormControlLabel, FormGroup, TextField } from '@mui/material';\r\nimport LogoutTwoToneIcon from '@mui/icons-material/LogoutTwoTone';\r\nimport SaveTwoToneIcon from '@mui/icons-material/SaveTwoTone';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport SearchableDropdown from \"./SearchableDropdown\";\r\nimport '../Css/UserPermission.css';\r\n\r\nconst UserPermission = () => {\r\n    const [users, setUsers] = useState([]);\r\n    const [eId, setEId] = useState(\"Select User Id...\");\r\n    const [permissions, setPermissions] = useState([]);\r\n    const [selectedPermissions, setSelectedPermissions] = useState([]);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if(localStorage.getItem('token') == null) navigate('/')\r\n        getUsers()\r\n        getPermissions()\r\n    }, []);\r\n\r\n    const getUsers = async () => {\r\n        try {\r\n        const response = await fetch('http://10.12.3.182:3000/inspaction/get_users', {\r\n            method: 'GET',\r\n            });\r\n        const json = await response.json();\r\n        const arr = []\r\n        json.forEach(element => {\r\n            arr.push(element)\r\n        });\r\n        setUsers(arr)\r\n        } catch (error) {\r\n        console.error(error);\r\n        }\r\n    };\r\n\r\n    const getPermissions = async () => {\r\n        try {\r\n        const response = await fetch('http://10.12.3.182:3000/inspaction/get_all_permissions', {\r\n            method: 'GET',\r\n            });\r\n        const json = await response.json();\r\n        const arr = []\r\n        json.forEach(element => {\r\n            arr.push(element)\r\n        });\r\n        setPermissions(arr)\r\n        } catch (error) {\r\n        console.error(error);\r\n        }\r\n    };\r\n\r\n    const getSelectedPermissions = async (id) => {\r\n        const response = await fetch('http://10.12.3.182:3000/inspaction/get_selected_permissions', {\r\n          method: 'POST',\r\n          headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            Id: id,\r\n          })\r\n        });\r\n        const json = await response.json();\r\n        setSelectedPermissions(json)\r\n    }\r\n\r\n    const handleEId = (val) => {\r\n        setEId(val)\r\n        getSelectedPermissions(val)\r\n    }\r\n\r\n    const savePermissions = async() => {\r\n        const response = await fetch('http://10.12.3.182:3000/inspaction/save_permissions', {\r\n            method: 'POST',\r\n            headers: {\r\n              Accept: 'application/json',\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n              eId,\r\n              selectedPermissions\r\n            })\r\n          });\r\n          const json = await response.json();\r\n    }\r\n\r\n    const handleChange = (id) => {\r\n        if (selectedPermissions.includes(id)) {\r\n          setSelectedPermissions(selectedPermissions.filter((x) => x !== id));\r\n        } else {\r\n          setSelectedPermissions([...selectedPermissions, id]);\r\n        }\r\n        console.log(selectedPermissions)\r\n      };\r\n\r\n    return (\r\n        <div className=\"card-container\">\r\n        <div className='top-section'>\r\n            <div className='head-title'>\r\n                User Permission\r\n            </div>\r\n            <div className='logout'>\r\n            <Button variant=\"outlined\" startIcon={<LogoutTwoToneIcon />} onClick={() => {localStorage.removeItem(\"token\"); navigate('/')}}>Logout</Button>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <div>\r\n                <SearchableDropdown\r\n                    options={users}\r\n                    label='eId'\r\n                    id=\"eId\"\r\n                    selectedVal={eId}\r\n                    handleChange={(val) => {handleEId(val)}}\r\n                />\r\n            </div>\r\n            <div>\r\n                <FormGroup>\r\n                    {permissions.map((element) => (\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    value={element.permission_name}\r\n                                    checked={selectedPermissions.includes(element.id)}\r\n                                    onChange={() => handleChange(element.id)}\r\n                                />\r\n                            }\r\n                            label={element.permission_name}\r\n                        />\r\n                    ))}\r\n                </FormGroup>\r\n                <Button variant=\"contained\" startIcon={<SaveTwoToneIcon />} onClick={() => {savePermissions()}}>Save</Button>\r\n            </div>\r\n        </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserPermission;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}